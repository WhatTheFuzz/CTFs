# Cache Me Outside

## Introduction

Cache me Outside is the second challenge in the binary exploitation category. The description states:

> While being super relevant with my meme references, I wrote a program to see how much you understand heap allocations. nc mercury.picoctf.net 34499 heapedit Makefile libc.so.6

## Information Gathering

### Hint #1

> It may be helpful to read a little bit on GLIBC's tcache.

Before I looked at this challenge, I had no idea what the tcache was. Having only read through it a couple times, I would do a much poorer explanation than the blogs I found [here][azeria] and [here][azeria]. Essentially, the tcache is one of five types of bins that the heap manager keeps track of. The tcache is a per-thread cache that is used to immediately service an allocation without needing to wait on a heap lock when a thread requests memory. When a chunk of memory is freed, providing it it not null and is a valid address, it will be placed in the tcache if it fits (otherwise it could be `munmmap`'ed or stored in a different bin tracked by the heap manager). If we later request a chunk of the same size, we will retrieve the one we `free`'d earlier. This is where things could get hairy because the data at those memory location aren't erased, they are just marked as free for use. So if we have the ability to look into the tcache, we might see data that the developer didn't want us to see.

[azeria]: https://azeria-labs.com/heap-exploitation-part-2-glibc-heap-free-bins/
[nightmare]: https://azeria-labs.com/heap-exploitation-part-2-glibc-heap-free-bins/